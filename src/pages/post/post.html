<ion-header>
  <ion-navbar color="primary">
    <ion-title>{{ post?.title}}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="syncPost()">
        <ion-icon name="refresh"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class="container">
  <ion-card>
    <ion-item padding class="post-header">
      <ion-avatar item-left>
        <img src="{{ post?.face }}">
      </ion-avatar>
      <h2 ion-text color="primary" class="post-author">{{ post?.name }}</h2>
      <h2>
        <b>{{ post?.title}}</b>
      </h2>
    </ion-item>
    <div text-center>
      <img class="full-image" src="{{ post?.url }}">
      <h2 text-center padding>{{ post?.content}}</h2>
      <div class="interactions">
        <a (click)="toggleLike(post)" class="subdued">
          <ion-icon name="thumbs-up" color="secondary" *ngIf="post?.liked"></ion-icon>
          <ion-icon name="thumbs-up" color="gray" *ngIf="!post?.liked"></ion-icon>
          {{ post?.likeCount}}
        </a>
        <a class="subdued">
          <ion-icon name="chatboxes" color="primary"></ion-icon>
          {{ post?.commentCount}}
        </a>
      </div>
      <ion-item class="post-comment" *ngFor="let comment of comments">
        <ion-avatar item-left (click)="viewUser(comment?.user_id)">
          <img src="{{ comment?.face }}">
        </ion-avatar>
        <div text-right>
          <ion-icon (click)="deleteComment(comment)" name="close" color="gray" class="item-complex" *ngIf="comment?.mine"></ion-icon>
        </div>

        <h3 ion-text color="primary" class="post-author">
          {{ comment?.name }}
        </h3>
        <p text-wrap>{{ comment?.content}}</p>
        <a (click)="toggleCommentLike(comment)" class="subdued like-count">
          <ion-icon name="heart" color="danger" *ngIf="comment?.liked"></ion-icon>
          <ion-icon name="heart" color="gray" *ngIf="!comment?.liked"></ion-icon>
          {{ comment?.likeCount}}
        </a>
        <span class="post-time">
          <ion-icon name="timer-outline"></ion-icon>
          {{ comment?.time }}
        </span>
      </ion-item>
    </div>
    <ion-list>
      <ion-item>
        <ion-label floating>Add Comment: </ion-label>
        <ion-input [(ngModel)]="postComment.content" type="text"></ion-input>
      </ion-item>
      <button (click)="addComment()" color="secondary" ion-button full>Save</button>
    </ion-list>
  </ion-card>
</ion-content>